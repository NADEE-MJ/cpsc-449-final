<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-light">
    <div class="container mt-5">
      <h1>Dashboard</h1>
      <div id="userInfo">
        <!-- User info will be loaded here -->
      </div>
      <h2>Your Classes:</h2>
      <ul id="classList" class="list-group">
        <!-- Classes will be loaded here -->
      </ul>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        fetchUserData();
        fetchClassData();
      });

      function fetchUserData() {
        fetch("/api/user_info")
          .then((response) => response.json())
          .then((data) => {
            const userInfo = document.getElementById("userInfo");
            userInfo.innerHTML = `<p>Welcome, ${data.full_name}!</p>`;
          })
          .catch((error) => console.error("Failed to fetch user data:", error));
      }

      function fetchClassData() {
        fetch("/api/user_classes")
          .then((response) => response.json())
          .then((data) => {
            const classList = document.getElementById("classList");
            classList.innerHTML = "";
            data.classes.forEach((cls) => {
              const li = document.createElement("li");
              li.className = "list-group-item";
              li.textContent = `${cls.subject} ${cls.class_number} - ${cls.professor}`;
              classList.appendChild(li);
            });
          })
          .catch((error) => console.error("Failed to fetch classes:", error));
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
